"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.focusSelectors = void 0;
var _store = require("@mui/x-internals/store");
var _selectors = require("../selection/selectors");
var _selectors2 = require("../items/selectors");
var _utils = require("../items/utils");
var _selectors3 = require("../expansion/selectors");
const defaultFocusableItemIdSelector = (0, _store.createSelectorMemoized)(_selectors.selectionSelectors.selectedItems, _selectors3.expansionSelectors.expandedItemsMap, _selectors2.itemsSelectors.itemMetaLookup, _selectors2.itemsSelectors.disabledItemFocusable, state => _selectors2.itemsSelectors.itemOrderedChildrenIds(state, null), (selectedItems, expandedItemsMap, itemMetaLookup, disabledItemsFocusable, orderedRootItemIds) => {
  const firstSelectedItem = selectedItems.find(itemId => {
    if (!disabledItemsFocusable && (0, _utils.isItemDisabled)(itemMetaLookup, itemId)) {
      return false;
    }
    const itemMeta = itemMetaLookup[itemId];
    return itemMeta && (itemMeta.parentId == null || expandedItemsMap.has(itemMeta.parentId));
  });
  if (firstSelectedItem != null) {
    return firstSelectedItem;
  }
  const firstNavigableItem = orderedRootItemIds.find(itemId => disabledItemsFocusable || !(0, _utils.isItemDisabled)(itemMetaLookup, itemId));
  if (firstNavigableItem != null) {
    return firstNavigableItem;
  }
  return null;
});
const focusSelectors = exports.focusSelectors = {
  /**
   * Gets the item that should be sequentially focusable (usually with the Tab key).
   * At any point in time, there is a single item that can be sequentially focused in the Tree View.
   * This item is the first selected item (that is both visible and navigable), if any, or the first navigable item if no item is selected.
   */
  defaultFocusableItemId: defaultFocusableItemIdSelector,
  /**
   * Checks whether an item is the default focusable item.
   */
  isItemTheDefaultFocusableItem: (0, _store.createSelector)(defaultFocusableItemIdSelector, (defaultFocusableItemId, itemId) => defaultFocusableItemId === itemId),
  /**
   * Gets the id of the item that is currently focused.
   */
  focusedItemId: (0, _store.createSelector)(state => state.focusedItemId),
  /**
   * Checks whether an item is focused.
   */
  isItemFocused: (0, _store.createSelector)((state, itemId) => state.focusedItemId === itemId)
};